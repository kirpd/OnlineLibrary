{% extends "base.html" %}
{% block content %}
<h1 class="h1-elem">Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ</h1>
<div class="container main">
    {% for book in books %}
    <div class="card main__item" style="width: 14rem;">
        <a href="/info_about_book/{{ book.id }}">
            <img src="data:png;base64,{{ book.image }}" class="card-img-top" alt="Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ÐºÐ½Ð¸Ð³Ð¸" height="150">
        </a>
        <div class="card-body">
            <h5 class="card-title">{{ book.title }}</h5>
            {% set length = book.description | length %}
            <p class="card-text">{% if length > 50 %} {{ book.description[:50] }}... {% else %} {{ book.description
                }}
                {% endif %}</p>
            <p class="card-text">
                <b>Ð–Ð°Ð½Ñ€:</b> {{ book.str_genre }}
            </p>
            <p class="card-text">
                â˜… {{ book.count_favorites }}
            </p>
            <p class="btn-group btn-group-sm card-text" role="group" aria-label="Basic example">
                <a href="/download_book/{{ book.id }}" class="btn btn-primary">Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ</a>
                <a href="/read_book/{{ book.id }}" class="btn btn-info">Ð§Ð¸Ñ‚Ð°Ñ‚ÑŒ</a>
                <a href="/info_about_book/{{ book.id }}" class="btn btn-info">ðŸ›ˆ</a>
                {% if current_user.is_authenticated and book.id in books_id %}
                <a href="/delete_from_favorites_book_on_favorites/{{ book.id }}" class="btn btn-warning">â˜…</a>
                {% endif %}
            </p>
            {% if current_user.is_authenticated and current_user.is_admin %}
            <p class="btn-group btn-group-sm card-text" role="group" aria-label="Basic example">
                <a href="/edit_book/{{ book.id }}" class="btn btn-secondary">Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ</a>
                <a href="/delete_book/{{ book.id }}" class="btn btn-danger">Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ</a>
            </p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}